<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/svg+xml" 
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/icons/star.svg">
<title>OneYearLater</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
/* Body */
body { 
    font-family: "Roboto", sans-serif; 
    background: radial-gradient(circle at top, #0f2a25, #061a1f); 
    color: #e0fff9;  
    min-height:100vh; 
    margin:0; 
    overflow-x:hidden;
}

/* Container */
.container { 
    position: relative; 
    z-index: 1; 
    padding-top:60px; 
    max-width:700px; 
    margin:0 auto; 
    text-align:center; 
}

/* Countdown boxes */
.deadline { 
    display:flex; 
    justify-content:center; 
    gap:1rem; 
    margin-bottom:30px; 
    flex-wrap: wrap;
}
.deadline-format { 
    width:6rem; 
    height:6rem; 
    background: rgba(15,42,37,0.8); /* dark forest tint */
    color:#e0fff9; 
    display:grid; 
    place-items:center; 
    border-radius:12px; 
    box-shadow: 0 0 20px rgba(0,255,204,0.4); 
    transition: transform 0.3s, box-shadow 0.3s;
}
.deadline-format:hover {
    transform: scale(1.1);
    box-shadow: 0 0 35px rgba(0,255,204,0.6);
}
.deadline-format h2 { margin:0; font-size:1.5rem; }

/* Subtitle */
#subtitle { font-size:1.1rem; margin-bottom:20px; color:#a0fff5; }

/* Letter buttons */
#letter-buttons { margin-top:25px; }
#letter-buttons .btn { 
    background: #06332d; 
    border: 1px solid #00ffcc; 
    color:#e0fff9; 
    margin:0 10px;
    transition: all 0.3s;
}
#letter-buttons .btn:hover {
    background: #00ffcc; 
    color:#061a1f;
}

/* Sparkles */
#sparkles-container { 
    position:fixed; 
    top:0; 
    left:0; 
    width:100%; 
    height:100%; 
    pointer-events:none; 
    z-index:-1; 
    overflow:hidden; 
}

/* Modal */
.modal-content {
    background: #06332d; 
    color:#e0fff9;
    border: 1px solid #00ffcc;
    border-radius:12px;
}
.modal-header, .modal-footer { border:none; }
.modal-title { color:#e0fff9; }
.form-control {
    background: #0f2a25; 
    color:#e0fff9;
    border: 1px solid #00ffcc;
}
.modal-body { overflow-x: hidden; }
.modal-body p { word-wrap: break-word; white-space: pre-wrap; overflow-wrap: break-word; }
.form-control:focus {
    background: #0f2a25;
    color:#e0fff9;
    border-color: #00ffcc;
    box-shadow: 0 0 10px #00ffcc;
}
</style>
</head>
<body>
<!-- Passcode Overlay -->
<div id="passcodeOverlay" style="position:fixed; top:0; left:0; width:100%; height:100%; 
    background: radial-gradient(circle at center, #061a1f, #0f2a25);
    display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:9999; 
    color:#7aa8a0; text-align:center; padding:20px;">
<h2 style="font-size:2rem; margin-bottom:20px; color:#7aa8a0;">‚ú® You Stand Before the Enchanted Forest ‚ú®</h2>
<p style="max-width:400px; font-size:1rem; line-height:1.5; margin-bottom:20px; color:#7aa8a0;">
    The ancient Time Fairies guard the secret portal that reaches to her. 
    Only those who know the magical words may enter and receive her message from the portal. 
    Take a deep breath‚Ä¶ step carefully‚Ä¶ and type the secret words below.
</p>
<input type="password" id="passcodeInput" placeholder="Enter the secret words..." 
        style="padding:10px; font-size:1rem; border:1px solid #7aa8a0; border-radius:8px; 
        background:#0f2a25; color:#e0fff9; margin-top:15px; width:200px; text-align:center;">
<button id="passcodeBtn" style="margin-top:15px; padding:8px 20px; border:none; border-radius:8px; 
    background:#00ffcc; color:#061a1f; font-weight:bold; cursor:pointer;">Step Into the Portal</button>
<p id="passcodeMessage" style="margin-top:15px; color:#ff6f91;"></p>
</div>

<!-- Main container -->
<div class="container" style="display:none;">
  <h2 id="title">‚ú® Your Future Awaits‚Ä¶ ‚ú®</h2>
  <div id="subtitle">Your personal portal awaits ‚ú®</div>
  <p style="color:#a0fff5; font-style:italic; margin-bottom:20px;">Promptly, a message will arrive</p>

  <div class="deadline">
    <div class="deadline-format"><h2 class="days">--</h2><span>days</span></div>
    <div class="deadline-format"><h2 class="hours">--</h2><span>hours</span></div>
    <div class="deadline-format"><h2 class="minutes">--</h2><span>mins</span></div>
    <div class="deadline-format"><h2 class="seconds">--</h2><span>secs</span></div>
  </div>

  <div id="letter-buttons" style="display:none;">
    <button id="readBtn" class="btn btn-primary">Read Letter</button>
    <button id="writeBtn" class="btn btn-primary">Write Letter</button>
  </div>
</div>

<!-- Read Modal -->
<div class="modal fade" id="readModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Her Message from the Forest ‚ú®</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body"><p id="letterContent"></p></div>
      <div class="modal-footer"><button class="btn btn-secondary" data-bs-dismiss="modal">Close</button></div>
    </div>
  </div>
</div>

<!-- Write Modal -->
<div class="modal fade" id="writeModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Write Your Letter</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div style="background: rgba(0,255,204,0.1); color:#e0fff9; padding:10px; border-radius:8px; margin-bottom:15px; font-size:0.9rem; max-height:200px; overflow-y:auto;">
          <strong>Quest: Your One-Year Future Letter</strong><br>
          Write a letter from her (one year from today) and seal it until next year.<br><br>
          <strong>Objectives:</strong>
          <ul style="padding-left:18px; margin:5px 0;">
            <li>Set a calm, intentional environment.</li>
            <li>Write as her: accomplishments, emotional growth, surprises.</li>
            <li>List 3 ‚ÄúIf nothing else happens this year, I‚Äôm proud that I‚Ä¶‚Äù wins.</li>
            <li>Seal the letter (physical or digital) and set it aside until next year.</li>
          </ul>
          <strong>Tips:</strong>
          <ul style="padding-left:18px; margin:5px 0;">
            <li>Write in the ‚Äúafter‚Äù perspective, as if the year already happened.</li>
            <li>Optional ritual: tea, candle, playlist.</li>
            <li>Do not revisit until the same date next year.</li>
          </ul>
        </div>
        <textarea id="letterText" class="form-control" rows="8" placeholder="Write her letter here..."></textarea>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="saveLetterBtn">Save Letter</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div id="sparkles-container"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const correctPasscode = "magicforest";
const overlay = document.getElementById("passcodeOverlay");
const input = document.getElementById("passcodeInput");
const btn = document.getElementById("passcodeBtn");
const msg = document.getElementById("passcodeMessage");

// Check session
if(sessionStorage.getItem("passcodeUnlocked") === "true"){
    overlay.style.display = "none";
    showCountdownPortal();
}

btn.onclick = () => {
    if(input.value.toLowerCase() === correctPasscode){
        msg.style.color = "#00ffcc";
        msg.textContent = "‚ú® The Time Fairies flutter around you, granting access to the portal‚Ä¶ she awaits! ‚ú®";
        sessionStorage.setItem("passcodeUnlocked", "true");
        setTimeout(() => {
            overlay.style.display = "none";
            showCountdownPortal();
        }, 1500);
    } else {
        msg.style.color = "#ff6f91";
        msg.textContent = "üö´ The Time Fairies block your path, whispering: 'Not yet‚Ä¶ try again.'";
        input.value = "";
        input.focus();
    }
};
input.addEventListener("keyup", (e) => { if(e.key === "Enter") btn.click(); });

function showCountdownPortal(){
    document.querySelector('.container').style.display = "block";
    updateCountdown();
}

const READ_START = { month: 11, day: 1 };
const READ_END = { month: 11, day: 10 };

const titleEl = document.getElementById("title");
const subtitleEl = document.getElementById("subtitle");
const daysEl = document.querySelector(".days");
const hoursEl = document.querySelector(".hours");
const minutesEl = document.querySelector(".minutes");
const secondsEl = document.querySelector(".seconds");
const letterButtons = document.getElementById("letter-buttons");

function isBetween(date, start, end){
    const d = new Date(date.getFullYear(), date.getMonth(), date.getDate());
    const s = new Date(date.getFullYear(), start.month, start.day);
    const e = new Date(date.getFullYear(), end.month, end.day);
    return d >= s && d <= e;
}

function getNextDec1(){
    const now = new Date();
    let target = new Date(now.getFullYear(), 11, 1, 0,0,0);
    if(now > target) target = new Date(now.getFullYear()+1, 11, 1, 0,0,0);
    return target;
}

function updateCountdown(){
    const now = new Date();

    if(isBetween(now, READ_START, READ_END)){
        titleEl.textContent = "‚ú® The Portal Awaits ‚ú®";
        subtitleEl.innerHTML = "Step into the magical forest and reach through the portal‚Ä¶ there she awaits.<br><span style='display:block; text-align:center;'>Write or read her message and capture your dreams!</span>";
        letterButtons.style.display = "block";

        const endDate = new Date(now.getFullYear(), READ_END.month, READ_END.day, 23,59,59);
        const diff = endDate - now;
        const d = Math.floor(diff / (1000*60*60*24));
        const h = Math.floor((diff / (1000*60*60)) % 24);
        const m = Math.floor((diff / (1000*60)) % 60);
        const s = Math.floor((diff / 1000) % 60);
        daysEl.textContent = d.toString().padStart(2,'0');
        hoursEl.textContent = h.toString().padStart(2,'0');
        minutesEl.textContent = m.toString().padStart(2,'0');
        secondsEl.textContent = s.toString().padStart(2,'0');
        return;
    }

    const target = getNextDec1();
    const diff = target - now;
    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff / (1000*60*60)) % 24);
    const m = Math.floor((diff / (1000*60)) % 60);
    const s = Math.floor((diff / 1000) % 60);
    daysEl.textContent = d.toString().padStart(2,'0');
    hoursEl.textContent = h.toString().padStart(2,'0');
    minutesEl.textContent = m.toString().padStart(2,'0');
    secondsEl.textContent = s.toString().padStart(2,'0');

    if(now < new Date(now.getFullYear(), READ_START.month, READ_START.day)){
        titleEl.textContent = "‚ú® Await the Portal‚Ä¶ ‚ú®";
        subtitleEl.textContent = "Her message stirs in the magical forest, waiting for you to reach through.";
        letterButtons.style.display = "none";
    } else {
        titleEl.textContent = "‚ú® The Portal Closes ‚ú®";
        subtitleEl.textContent = "Her message has returned safely through time. Return next year to glimpse the forest again.";
        letterButtons.style.display = "none";
    }
}

setInterval(updateCountdown, 1000);
updateCountdown();

// Modals
const readModal = new bootstrap.Modal(document.getElementById('readModal'));
const writeModal = new bootstrap.Modal(document.getElementById('writeModal'));
const readBtn = document.getElementById('readBtn');
const writeBtn = document.getElementById('writeBtn');
const letterContent = document.getElementById('letterContent');
const letterText = document.getElementById('letterText');
const saveBtn = document.getElementById('saveLetterBtn');

readBtn.onclick = () => {
    letterContent.textContent = localStorage.getItem("futureLetter") || "No letter saved yet.";
    readModal.show();
};

writeBtn.onclick = () => {
    letterText.value = localStorage.getItem("futureLetter") || "";
    writeModal.show();
};

saveBtn.onclick = () => {
    localStorage.setItem("futureLetter", letterText.value.trim());
    writeModal.hide();
    alert("Her letter is safely sealed in the magical forest! ‚ú®");
};

// Sparkles
const sparkleContainer = document.getElementById('sparkles-container');
function createSparkle(){
    const s = document.createElement('div');
    const size = Math.random()*6 + 4;
    s.style.width = s.style.height = size+'px';
    s.style.position = 'absolute';
    s.style.top = '-10px';
    s.style.left = Math.random()*window.innerWidth+'px';
    const colors = ['#00FFCC','#FFD700','#FF69B4'];
    s.style.background = `radial-gradient(circle, ${colors[Math.floor(Math.random()*colors.length)]}, rgba(0,0,0,0))`;
    s.style.borderRadius = '50%';
    s.style.filter = 'blur(1px)';
    s.style.opacity = Math.random()*0.8+0.3;
    s.style.pointerEvents = 'none';
    sparkleContainer.appendChild(s);
    let y = -10;
    const speed = Math.random()*2+1;
    function animate(){ y+=speed; s.style.top=y+'px'; if(y<window.innerHeight+10) requestAnimationFrame(animate); else s.remove();}
    animate();
}
setInterval(createSparkle, 150);
</script>
</body>
</html>
